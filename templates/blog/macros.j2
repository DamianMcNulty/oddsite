{% import 'utility.macros.j2' as utility %}
{% import 'blog/utility.macros.j2' as blog %}
{% import 'birds/utility.macros.j2' as birds %}


{% macro list(post, section='blog-post') %}
  <article {{ utility.attr_if('data-module', section) }} class="preview">
    {% set heading = 'h2' if section else 'h3' %}
    <{{ heading }} class="post-title">
      <a href="{{ link_to('page', slug=post.slug) }}" rel="bookmark">
        {{ post.title }}
      </a>
    </{{ heading }}>

    <div class="meta">
      <p class="byline">
        <span class="meta-bit">by</span> {{ birds.get_card(post.author) }}
        <span class="meta-bit">on</span> {{ utility.datetime(post.pub_date) }}
      </p>
      {{ blog.tags(post.tags) }}
    </div>

    {{ blog.header_image(post) }}

    {% if post.summary %}
      <p class="summary">
        {{ post.render_summary() }}
      </p>
    {% endif %}

    <a href="{{ link_to('page', slug=post.slug) }}" rel="bookmark">
      Read More Â»
    </a>
  </article>
{% endmacro %}


{% macro byline(post) %}
  <p class="byline">
    <span class="meta-bit">by</span> {{ birds.get_card(post.author) }}
    {{ utility.datetime(post.pub_date) }}
  </p>
  {{ blog.tags(post.tags) }}
{% endmacro %}
