{% macro talk_link(text, url) %}
  {% if url %}
  <a href="{{ url }}" class="talk-link">{{ text }}</a>
  {% endif %}
{% endmacro %}

{% if config.talks_past %}
<section class="talks--past">
  <h2 class="talks-header">Recent Talks</h2>

  {% for talk in config.talks_past %}
  {% if not module.count or loop.index <= module.count %}

  <article class="talk--summary">
    <h3 class="talk-title">{{ talk.title|safe }}</h3>

    <a href="{{ link_to('author', author=talk.author) }}" class="talk-citation">
      {{ talk.author }}
    </a>

    {% if talk.slides or talk.video %}
    <div class="talk-links">
      {{ talk_link('slides', talk.slides) }}
      {{ talk_link('video', talk.video) }}
    </div>
    {% endif %}

    <div class="talk-details">
      {% if talk.forum_url %}
      <a href="{{ talk.forum_url|safe }}" class="talk-forum">{{ talk.forum|safe }}</a>,
      {% else %}
      <span class="talk-forum">{{ talk.forum|safe }}</span>,
      {% endif %}

      <span class="talk-year">{{ talk.year|safe }}</span>
    </div>
  </article>

  {% endif %}
  {% endfor %}
</section>
{% endif %}
