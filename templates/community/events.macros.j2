{% import "utility.macros.j2" as utility %}


{% macro speaking(author=none, past=none) %}
  {% set range = 'past' if past else 'future' %}
  {% set reverse = past %}
  {% set events = get_events_by_bird(author) if author else get_events() %}
  {% set events = events|filter_events(past) %}

  {% if events %}
    <section data-module="events" data-events="{{ range }}">
      {% set title = 'Speaking History' if past else 'Upcoming Talks' %}
      <h2>{{ title }}</h2>

      {{ list(
        events=events|sort(reverse=reverse, attribute='date')
      ) }}
    </section>
  {% endif %}
{% endmacro %}


{% macro list(events) %}
  {% for event in events %}
    {% set event_date = event.date|make_date %}

    <article class="event">
      <time>{{ event_date|format_date('%B %-d, %Y') }}</time>
      {{ utility.link_if(event.venue, event.url) }}
    </article>
  {% endfor %}
{% endmacro %}
