@import "compass";
@import "susy";

// --------------------------------------------
// settings

$total-columns  : 6;
$column-width   : 5em;
$gutter-width   : 0;
$grid-padding   : 0;

$full-size      : 12;
$container-width: container-outer-width($full-size);

// --------------------------------------------
// layout
//
// we only need to set the container once
// (for our largest layout)
// because it will automatically remain full-width
// at any smaller size.

@include border-box-sizing;

body { padding: 0; margin: 0; }

.container {
  @include container;
  overflow: hidden;
}

header, footer { clear: both; }

// --------------------------------------------
// small

$side-width: columns(5);

.left, .right, .main {
  @include transition(.3s all ease);
  float: left;
  width: 100%;
}

.left, .right {
  width: $side-width;
}

.left {
  margin-left: -100%;
  .show-left & { margin-left: 0; }
}

.main {
  margin-left: 0;
  .show-left & { margin-right: -100%; }
  .show-right & { margin-left: - $side-width; }
}

.right {
  float: right;
  margin-right: -100%;
  .show-right & { margin-right: 0; }
}

// --------------------------------------------
// medium
//
// You can set this to any min-width
// and any column-count that you want for tablets.
// No need for a max-width,
// because most of it works towards the desktop
// and we can override the rest.
// We're not setting a container,
// so the column-count is just how you want to divide up
// the 100% space that we have available.

$medium   : 30em;   // medium min-width breakpoint
$columns  : 8;      // divide into as many columns as you want
$main     : 5;      // main content uses most of them
$side     : $columns - $main; // room for one sidebar at a time

@include at-breakpoint($medium $columns) {
  [href="#left"] { visibility: hidden; }


  .left {
    width: columns($side);
    margin-left: 0;
    .show-right & { margin-left: - 100%; }
  }

  .main {
    width: columns($main);
    .show-right & { margin-left: 0; }
    .show-left & {
      margin-left: 0;
      margin-right: 0;
    }
  }

  .right {
    width: columns($side);
    .show-right & { margin-right: 0; }
  }
}

// --------------------------------------------
// large
//
// Now we're just bringing things back to normal.

$large      : 60em;           // large breakpoint
$columns    : $full-size;      // use all the columns
$main       : 6;              // main uses some
$side       : floor(($columns - $main)/2); // the rest are divided between sidebars

@include at-breakpoint($large $columns) {
  [href="#right"] { visibility: hidden; }

  .left {
    width: columns($side);
    .show-right & { margin-left: 0; }
  }

  .main {
    width: columns($main);
  }

  .right {
    width: columns($side);
    margin-right: 0;
  }
}

// --------------------------------------------
// styles (for demo only)

.left, .right, .main {
  height: 20em;
  padding: 1em;
}
.left { background: #cff; }
.main { background: #ddd; }
.right { background: #ffc; }

header, footer {
  height: 3em;
  padding: 1em;
  background: #fcf;
  text-align: center;
}

[href="#left"] { float: left; }
[href="#right"] { float: right; }

