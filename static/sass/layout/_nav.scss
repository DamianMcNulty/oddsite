// Site Navigation
// ===============

.nav {
  position: relative;
}


.main-nav {
  display: flex;
  justify-content: space-between;
  margin: negative('gutter') auto 0;
  max-width: size('nav-narrow');
  padding: 0 size('shim');
  width: 100%;

  .nav-item {
    display: inline-flex;

    &:nth-of-type(2) {
      flex-grow: 1;
    }

    @include above('nav-medium') {
      position: relative;
    }
  }
}

// Shared base styles for links in navigation
.nav-link {
  color: color('action-alt');
  font-weight: bold;
  padding: size('half-shim') size('shim');
  text-decoration: none;
  white-space: nowrap;

  #{$link} {
    color: color('action-alt');
  }

  #{$focus} {
    color: color('action');
  }
}

// Styles for main items outside the .nav-link base styles
.nav-link-main {
  display: inline-block;
  padding: size('half-shim') size('shim');

  @include above('nav-narrow') {
    padding: size('shim') size('gutter');
  }

  &[aria-pressed='true'] {
    color: color('action');
  }
}

// Styles for child items outside the .nav-link base styles
.nav-link-sub {
  display: block;
  padding: size('half-shim') size('gutter');
  text-align: left;
}

// Map nav locations for highlighting active page
$nav-locations: (
  'projects': 'work',
  'open-source': 'work',
  'birds': 'about',
  'speaking': 'about',
  'community': 'about',
  'blog': null,
  'contact': null,
);

// Highlight self and parent (if applicable)
@each $location, $parent in $nav-locations {
  [data-location='#{$location}'] {
    [data-active='#{$location}'],
    [data-active='#{$parent}'] {
      font-style: italic;
    }
  }
}

// Dropdown ul for child items
.is-dropdown {
  background-color: color('background');
  border-bottom: size('border') solid color('border');
  box-shadow: 0 6px 5px color('shadow');
  left: 0;
  padding: size('gutter') + size('half-shim') 0 size('shim');
  position: absolute;
  right: 0;
  top: 100%;
  width: 100vw;
  z-index: 1;

  @include above('nav-medium') {
    min-width: size('dropdown-narrow');
    right: auto;
    width: auto;
  }

  @include above('nav-wide') {
    min-width: size('dropdown-wide');
  }
}
